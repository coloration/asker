!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(t){return"function"==typeof t}function r(t){return"[object Object]"===function(t){return Object.prototype.toString.call(t)}(t)}function s(t){return function(t){return"number"==typeof t&&!isNaN(t)}(t)&&t>0}function u(t){return Array.isArray(t)}function i(t){return r(t)||u(t)}function c(t,e){if(null!=e)if("object"!=typeof e)t(e,0,e);else if(u(e))e.forEach(function(n,o){t.call(null,n,o,e)});else for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function a(t,e=!1){if(!r(t))return"";const n=[];return c((t,o)=>{t=e?encodeURIComponent(t):t,n.push(`${o}=${t}`)},t),n.join("&")}function f(...t){const e=t.filter(t=>i(t)),n=e.shift();return e.reduce((t,e)=>{if(!i(e))throw TypeError(`merge a ${e} to object`);return c(function(e,n){const o=t[n];r(e)?t[n]=f(r(o)?o:{},e):u(e)?t[n]=f(u(o)?o:[],e):t[n]=e},e),t},n),n}function l(){let t=[],e=[];return Array.from(arguments).filter(t=>t).forEach(n=>{const r=n.before,s=n.after;(o(r)||u(r))&&(t=t.concat(r)),(o(s)||u(s))&&(e=e.concat(s))}),{beforeQueue:t,afterQueue:e}}n.r(e);const p=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];const d="Content-Type",y={data:null,status:200,statusText:"you skip request and success always",headers:{},conf:{},request:null},h="ASKER:REQUEST_ABORT",m="ASKER:REQUEST_ERROR",b="ASKER:REQUEST_TIMEOUT";function g(t){if(!(this instanceof g))return new g(t);const e=f({},g.conf,t);this.conf=Object.assign(e,l(g.conf,t))}g.errorType={ABORT:h,ERROR:m,TIMEOUT:b},g.conf=f({},{url:"",baseUrl:"",query:"",body:null,headers:{},postType:"json",responseType:"object",timeout:0});var w=g;function j(t,e){if(!window.Blob)return t?[t]:[];if(!(t instanceof Blob))throw TypeError("first must be a Blob");if("number"!=typeof e)throw ReferenceError('must set a "piece" size');let n=t.size,o=0,r=o+e;const s=[];for(;o<n;){const u=t.slice(o,r);s.push(u),r=(r=(o=r)+e)<n?r:n}return s}function T(t){return function(e){let n;try{(n=e(t))instanceof Promise&&(n=n.catch(t))}catch(e){t(e)}return n}}function E(t){return new Promise(function(e,n){const{adapter:r}=t,s=f({},y,{conf:t}),u=o(r)?r(t,s):f(s,{data:r,request:null});(u instanceof Promise?u:Promise.resolve(u)).then(function(r){(o(t.validator)?t.validator(r.status):r.status>=200&&r.status<300)?e(r):n({message:`adapter return status: ${r.status}`,status:r.status})})})}function x(t){return new Promise(function(e,n){let r=new XMLHttpRequest;r.onreadystatechange=function(){if(!r||4!==r.readyState)return;if(!(o(t.validator)?t.validator(r.status):r.status>=200&&r.status<300))return n({message:r.responseText,status:r.status});const s=function(t){if(!o(t.getAllResponseHeaders))return null;const e=t.getAllResponseHeaders(),n={};let r,s,u;return e.split("\n").forEach(function(t){if(u=t.indexOf(":"),r=t.substr(0,u).trim().toLowerCase(),s=t.substr(u+1).trim(),r){if(n[r]&&p.includes(r))return;n[r]="set-cookie"===r?(n[r]?n[r]:[]).concat([s]):n[r]?n[r]+", "+s:s}}),n}(r),u=f({},y,{data:"text"===t.responseType?r.responseText:JSON.parse(r.responseText),status:r.status,statusText:r.statusText,headers:s,conf:t,request:r});r=null,e(u)},r.onabort=function(){r&&(o(t.onAbort)?t.onAbort.call(null,h,r):n(h),r=null)},r.onerror=function(){r&&(o(t.onError)?t.onError.call(null,m,r):n(m),r=null)},r.ontimeout=function(){r&&(o(t.onTimeout)?t.onTimeout.call(null,b,r):n(b),r=null)},s(t.timeout)&&(r.timeout=t.timeout),t.withCredentials&&(r.withCredentials=!0);const u=t.headers;r.open(t.method.toUpperCase(),t.uri,!0),c(function(e,n){t.body||"content-type"!==n.toLowerCase()?r.setRequestHeader(n,e):delete u[n]},u),o(t.onDownloadProgress)&&r.addEventListener("progress",function(e){t.onDownloadProgress.call(null,e,r,t)}),o(t.onUploadProgress)&&r.upload&&r.upload.addEventListener("progress",function(e){t.onUploadProgress.call(null,e,r,t)}),r.send(t.body)})}function O(t,e){return new Promise(function(n,o){const r="asker_jsonp"+(new Date).getTime(),s=`${t.jsonp}=${r}`;let u=t.uri;const i=u.split("?").length>1;u+=(i?"&":"?")+s;const c=document.createElement("script");c.src=u,window[r]=function(o){const s=Object.assign({},e,{data:o,status:200,statusText:"jsonp",conf:t,request:u});n(s),delete window[r],document.body.removeChild(c)},document.body.appendChild(c)})}function v(t){let e=(t.baseUrl||"")+(t.url||"");r(t.params)&&(t.query=a(t.params),e+="?"+t.query),t.uri=e;const n=t.beforeQueue.reduce(function(t,e){return e(t)},t);return(void 0===n.adapter?x:E)(n).then(function(t){return n.afterQueue.reduce(function(t,e){return e(t)},t)})}function P(t){return function(e,n,o){const s=l(this.conf,o);let i=f({},this.conf,o);if((i=Object.assign(i,s)).method=t,i.url=e,n){const t=i.headers||{};let e=null;switch(i.postType){case"form-data":e=function(t){if(!r(t)&&!u(t))return t;const e=new FormData;return c((t,n)=>e.append(n,t),t),e}(n),delete t[d];break;case"text":e=n,t[d]="text/plain";break;case"form-urlencoded":e=a(n,!0),t[d]="application/x-www-form-urlencoded";break;case"json":default:p=n,e=JSON.stringify(p),t[d]="application/json"}i.body=e}var p;return v(i)}}n.d(e,"splitBlob",function(){return j}),n.d(e,"safeCall",function(){return T});const R=["get","delete","head","options"],A=["post","put","patch"];let S=null;R.forEach(function(t){w.prototype[t]=function(t){return function(e,n,o){const r=l(this.conf,o);let s=f({},this.conf,o);return(s=Object.assign(s,r)).method=t,s.url=e,s.params=n,v(s)}}(t)}),A.forEach(function(t){w.prototype[t]=P(t)}),R.concat(A).concat(["jsonp","batch"]).forEach(function(t){w[t]=function(){return(S=S||new w)[t](...arguments)}}),w.prototype.jsonp=function(t,e,n){return n=n||{},"string"==typeof e&&(n.jsonp=e,e=void 0),n.adapter=O,this.get(t,e,n)},w.prototype.batch=function(t,e,n){e=Array.isArray(e)?e:[e];const o=this,r=n.method||"get",s=n.slice||n.body.length,u=n.retry||0,i=[],c=e.slice(0,s),a=e.slice(s),f=new Map;return new Promise(function(e,s){Promise.all(c.map(e=>(function t(e,n,s,c){return o[r](e,n,s).then(function(t){i.push(t)}).catch(function(t){f.get(n)||f.set(n,0);const e=f.get(n);return e<u?(f.set(n,e+1),c.push(n),Promise.resolve()):Promise.reject({error:t,batch:n,all:Array.from(f.keys())})}).then(function(){if(c.length>0)return t(e,c.shift(),s,c)})})(t,e,n,a))).then(function(){e(i)}).catch(function(t){s(t)})})};e.default=w}])});