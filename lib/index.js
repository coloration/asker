!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return"function"==typeof t}function u(t){return"[object Object]"===function(t){return Object.prototype.toString.call(t)}(t)}function a(t){return function(t){return"number"==typeof t&&!isNaN(t)}(t)&&t>0}function i(t){return Array.isArray(t)}function s(t){return u(t)||i(t)}function c(t){return"string"==typeof t}function f(t,e){if(null!=e)if("object"!=r(e))t(e,0,e);else if(i(e))e.forEach((function(n,r){t.call(null,n,r,e)}));else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function l(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!u(t))return"";var n=[];return f((function(t,r){t=e?encodeURIComponent(t):t,n.push("".concat(r,"=").concat(t))}),t),n.join("&")}function p(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c(t)?("?"===t[0]&&(t=t.substr(1)),t.split("&").reduce((function(t,n){var r=n.split("=");if(2===r.length){var o=r[1];if(e)try{o=JSON.parse(o)}catch(t){}t[r[0]]=o}return t}),{})):t}function d(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter((function(t){return s(t)})),o=r.shift();return r.reduce((function(t,e){if(!s(e))throw TypeError("merge a ".concat(e," to object"));return f((function(e,n){var r=t[n];u(e)?t[n]=d(u(r)?r:{},e):i(e)?t[n]=d(i(r)?r:[],e):t[n]=e}),e),t}),o),o}function y(){var t=[],e=[];return Array.from(arguments).filter((function(t){return t})).forEach((function(n){var r=n.before,u=n.after;(o(r)||i(r))&&(t=t.concat(r)),(o(u)||i(u))&&(e=e.concat(u))})),{beforeQueue:t,afterQueue:e}}n.r(e);var h=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];var m="Content-Type",b={data:null,status:200,statusText:"you skip request and success always",headers:{},conf:{},request:null},v="ASKER:REQUEST_ABORT",g="ASKER:REQUEST_ERROR",w="ASKER:REQUEST_TIMEOUT",j={};function T(t){if(!(this instanceof T))return new T(t);var e=d({},T.conf,t);this.conf=Object.assign(e,y(T.conf,t))}T.errorType={ABORT:v,ERROR:g,TIMEOUT:w},T.conf=d({},{url:"",baseUrl:"",query:"",body:null,headers:{},postType:"json",responseType:"object",timeout:0}),T.cache=j;var O=T;function E(t){return new Promise((function(e,n){var r=t.adapter,u=d({},b,{conf:t}),a=o(r)?r(t,u):d(u,{data:r,request:null});(a instanceof Promise?a:Promise.resolve(a)).then((function(r){(o(t.validator)?t.validator(r.status):r.status>=200&&r.status<300)?e(r):n({message:"adapter return status: ".concat(r.status),status:r.status})}))}))}function x(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r&&4===r.readyState){if(!(o(t.validator)?t.validator(r.status):r.status>=200&&r.status<300))return n({message:r.responseText,status:r.status});var u=function(t){if(!o(t.getAllResponseHeaders))return null;var e,n,r,u=t.getAllResponseHeaders(),a={};return u.split("\n").forEach((function(t){if(r=t.indexOf(":"),e=t.substr(0,r).trim().toLowerCase(),n=t.substr(r+1).trim(),e){if(a[e]&&h.includes(e))return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a}(r),a=d({},b,{data:"text"===t.responseType?r.responseText:JSON.parse(r.responseText),status:r.status,statusText:r.statusText,headers:u,conf:t,request:r});r=null,e(a)}},r.onabort=function(){r&&(o(t.onAbort)?t.onAbort.call(null,v,r):n(v),r=null)},r.onerror=function(){r&&(o(t.onError)?t.onError.call(null,g,r):n(g),r=null)},r.ontimeout=function(){r&&(o(t.onTimeout)?t.onTimeout.call(null,w,r):n(w),r=null)},a(t.timeout)&&(r.timeout=t.timeout),t.withCredentials&&(r.withCredentials=!0);var u=t.headers;r.open(t.method.toUpperCase(),t.uri,!0),f((function(e,n){t.body||"content-type"!==n.toLowerCase()?r.setRequestHeader(n,e):delete u[n]}),u),o(t.onDownloadProgress)&&r.addEventListener("progress",(function(e){t.onDownloadProgress.call(null,e,r,t)})),o(t.onUploadProgress)&&r.upload&&r.upload.addEventListener("progress",(function(e){t.onUploadProgress.call(null,e,r,t)})),r.send(t.body)}))}function P(t,e){return new Promise((function(n,r){var o="asker_jsonp"+(new Date).getTime(),u="".concat(t.jsonp,"=").concat(o),a=t.uri,i=a.split("?").length>1;a+=(i?"&":"?")+u;var s=document.createElement("script");s.src=a,window[o]=function(r){var u=Object.assign({},e,{data:r,status:200,statusText:"jsonp",conf:t,request:a});n(u),delete window[o],document.body.removeChild(s)},document.body.appendChild(s)}))}function S(t){var e=(t.baseUrl||"")+(t.url||"");u(t.params)&&(t.query=l(t.params),e+="?"+t.query),t.uri=e;var n,r,o,a=t.getCache&&(n=t.method,["get","option","head"].includes(n));if(a&&(r=j,o=e,Object.prototype.hasOwnProperty.call(r,o)))return Promise.resolve(j[e]);var i=t.beforeQueue.reduce((function(t,e){return e(t)}),t);return(void 0===i.adapter?x:E)(i).then((function(t){var n=i.afterQueue.reduce((function(t,e){return e(t)}),t);return a&&(j[e]=n),n}))}function R(t){return function(e,n,r){var o,a=y(this.conf,r),s=d({},this.conf,r);if((s=Object.assign(s,a)).method=t,s.url=e,n){var c=s.headers||{},p=null;switch(s.postType){case"form-data":p=function(t){if(!u(t)&&!i(t))return t;var e=new FormData;return f((function(t,n){return e.append(n,t)}),t),e}(n),delete c[m];break;case"text":p=n,c[m]="text/plain";break;case"form-urlencoded":p=l(n,!0),c[m]="application/x-www-form-urlencoded";break;case"json":default:o=n,p=JSON.stringify(o),c[m]="application/json"}s.body=p}return S(s)}}function A(t,e){if(!window.Blob)return t?[t]:[];if(!(t instanceof Blob))throw TypeError("first must be a Blob");if("number"!=typeof e)throw ReferenceError('must set a "piece" size');for(var n=t.size,r=0,o=r+e,u=[];r<n;){var a=t.slice(r,o);u.push(a),o=(o=(r=o)+e)<n?o:n}return u}function q(t){return function(e){var n;try{(n=e(t))instanceof Promise&&(n=n.catch(t))}catch(e){t(e)}return n}}n.d(e,"splitBlob",(function(){return A})),n.d(e,"safeCall",(function(){return q})),n.d(e,"object2Query",(function(){return l})),n.d(e,"query2Object",(function(){return p}));var C=["get","delete","head","options"],U=["post","put","patch"],_=null;C.forEach((function(t){O.prototype[t]=function(t){return function(e,n,r){var o=y(this.conf,r),u=d({},this.conf,r);return(u=Object.assign(u,o)).method=t,u.url=e,u.params=n,S(u)}}(t)})),U.forEach((function(t){O.prototype[t]=R(t)})),C.concat(U).concat(["jsonp","batch"]).forEach((function(t){O[t]=function(){var e;return(e=_=_||new O)[t].apply(e,arguments)}})),O.prototype.jsonp=function(t,e,n){return n=n||{},c(e)&&(n.jsonp=e,e=void 0),n.method="get",n.adapter=P,this.get(t,e,n)},O.prototype.batch=function(t,e,n){e=Array.isArray(e)?e:[e];var r=this,o=n.method||"get",u=n.slice||n.body.length,a=n.retry||0,i=[],s=e.slice(0,u),c=e.slice(u),f=new Map;return new Promise((function(e,u){Promise.all(s.map((function(e){return function t(e,n,u,s){return r[o](e,n,u).then((function(t){i.push(t)})).catch((function(t){f.get(n)||f.set(n,0);var e=f.get(n);return e<a?(f.set(n,e+1),s.push(n),Promise.resolve()):Promise.reject({error:t,batch:n,all:Array.from(f.keys())})})).then((function(){if(s.length>0)return t(e,s.shift(),u,s)}))}(t,e,n,c)}))).then((function(){e(i)})).catch((function(t){u(t)}))}))};e.default=O}])}));