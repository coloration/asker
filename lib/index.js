!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return"function"==typeof e}function u(e){return"[object Object]"===function(e){return Object.prototype.toString.call(e)}(e)}function i(e){return function(e){return"number"==typeof e&&!isNaN(e)}(e)&&e>0}function a(e){return void 0===e}function s(e){return Array.isArray(e)}function c(e){return u(e)||s(e)}function f(e){return"string"==typeof e}function l(e,t){if(null!=t)if("object"!=r(t))e(t,0,t);else if(s(t))t.forEach((function(n,r){e.call(null,n,r,t)}));else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!u(e))return"";var n=[];return l((function(e,r){e=t?encodeURIComponent(e):e,n.push("".concat(r,"=").concat(e))}),e),n.join("&")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return f(e)?("?"===e[0]&&(e=e.substr(1)),e.split("&").reduce((function(e,n){var r=n.split("=");if(2===r.length){var o=r[1];if(t)try{o=JSON.parse(o)}catch(e){}e[r[0]]=o}return e}),{})):e}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return c(e)})),o=r.shift();return r.reduce((function(e,t){if(!c(t))throw TypeError("merge a ".concat(t," to object"));return l((function(t,n){var r=e[n];u(t)?e[n]=y(u(r)?r:{},t):s(t)?e[n]=y(s(r)?r:[],t):e[n]=t}),t),e}),o),o}function h(){var e=[],t=[];return Array.from(arguments).filter((function(e){return e})).forEach((function(n){var r=n.before,u=n.after;(o(r)||s(r))&&(e=e.concat(r)),(o(u)||s(u))&&(t=t.concat(u))})),{beforeQueue:e,afterQueue:t}}n.r(t);var m=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];function b(e,t){return{status:e,message:t}}var v="Content-Type",g={data:null,status:200,statusText:"you skip request and success always",headers:{},conf:{},request:null},w="ASKER:REQUEST_ABORT",j="ASKER:REQUEST_ERROR",T="ASKER:REQUEST_TIMEOUT",E={};function O(e){if(!(this instanceof O))return new O(e);var t=y({},O.conf,e);this.conf=Object.assign(t,h(O.conf,e))}O.errorType={ABORT:w,ERROR:j,TIMEOUT:T},O.conf=y({},{url:"",baseUrl:"",query:"",body:null,headers:{},postType:"json",responseType:"json",timeout:0}),O.cache=E;var R=O;function x(){if(!(this instanceof x))return new x;this.promise=new Promise(function(e){this.resolve=e}.bind(this))}function P(e){return new Promise((function(t,n){var r=e.adapter,u=y({},g,{conf:e}),i=o(r)?r(e,u):y(u,{data:r,request:null});(i instanceof Promise?i:Promise.resolve(i)).then((function(r){(o(e.validator)?e.validator(r.status):r.status>=200&&r.status<300)?t(r):n({message:"adapter return status: ".concat(r.status),status:r.status})}))}))}function S(e){return new Promise((function(t,n){var r=new XMLHttpRequest;function u(){r=null}r.onreadystatechange=function(){if(r&&4===r.readyState&&0!==r.status){if(!(o(e.validator)?e.validator(r.status):r.status>=200&&r.status<300))return n(b(r.status,r.responseText));var i=function(e){if(!o(e.getAllResponseHeaders))return null;var t,n,r,u=e.getAllResponseHeaders(),i={};return u.split("\n").forEach((function(e){if(r=e.indexOf(":"),t=e.substr(0,r).trim().toLowerCase(),n=e.substr(r+1).trim(),t){if(i[t]&&m.includes(t))return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i}(r),a=e.responseType&&"text"!==e.responseType?request.response:request.responseText,s=y({},g,{data:a,status:r.status,statusText:r.statusText,headers:i,conf:e,request:r});u(),t(s)}},r.onabort=function(){r&&(o(e.onAbort)?e.onAbort.call(null,w,r):n(b(r.status,w)),u())},r.onerror=function(){r&&(o(e.onError)?e.onError.call(null,j,r):n(b(r.status,j)),u())},r.ontimeout=function(){r&&(o(e.onTimeout)?e.onTimeout.call(null,T,r):n(b(r.status,T)),u())},i(e.timeout)&&(r.timeout=e.timeout),e.withCredentials&&(r.withCredentials=!0),r.open(e.method.toUpperCase(),e.uri,!0);var s=e.headers;l((function(t,n){e.body||"content-type"!==n.toLowerCase()?r.setRequestHeader(n,t):delete s[n]}),s),a(e.withCredentials)||(r.withCredentials=!!e.withCredentials),o(e.onDownloadProgress)&&r.addEventListener("progress",(function(t){e.onDownloadProgress.call(null,t,r,e)})),o(e.onUploadProgress)&&r.upload&&r.upload.addEventListener("progress",(function(t){e.onUploadProgress.call(null,t,r,e)})),e.canceler&&e.canceler.promise.then((function(){r&&(r.abort(),u())})),r&&r.send(e.body)}))}function A(e,t){return new Promise((function(n){var r="asker_jsonp"+(new Date).getTime(),o="".concat(e.jsonp,"=").concat(r),u=e.uri,i=u.split("?").length>1;u+=(i?"&":"?")+o;var a=document.createElement("script");function s(){window[r]&&(delete window[r],document.body.removeChild(a))}a.src=u,window[r]=function(r){var o=Object.assign({},t,{data:r,status:200,statusText:"jsonp",conf:e,request:u});n(o),s()},e.canceler&&e.canceler.promise.then(s),window[r]&&document.body.appendChild(a)}))}function q(e){var t=(e.baseUrl||"")+(e.url||"");u(e.params)&&(e.query=d(e.params),t+="?"+e.query),e.uri=t;var n,r,o,i=e.getCache&&(n=e.method,["get","option","head"].includes(n));if(i&&(r=E,o=t,Object.prototype.hasOwnProperty.call(r,o)))return Promise.resolve(E[t]);var s=e.beforeQueue.reduce((function(e,t){return t(e)}),e);return(a(s.adapter)?S:P)(s).then((function(e){var n=s.afterQueue.reduce((function(e,t){return t(e)}),e);return i&&(E[t]=n),n}))}function C(e){return function(t,n,r){var o,i=h(this.conf,r),a=y({},this.conf,r);if((a=Object.assign(a,i)).method=e,a.url=t,n){var c=a.headers||{},f=null;switch(a.postType){case"form-data":f=function(e){if(!u(e)&&!s(e))return e;var t=new FormData;return l((function(e,n){return t.append(n,e)}),e),t}(n),delete c[v];break;case"text":f=n,c[v]="text/plain";break;case"form-urlencoded":f=d(n,!0),c[v]="application/x-www-form-urlencoded";break;case"json":default:o=n,f=JSON.stringify(o),c[v]="application/json"}a.body=f}return q(a)}}function U(e,t){if(!window.Blob)return e?[e]:[];if(!(e instanceof Blob))throw TypeError("first must be a Blob");if("number"!=typeof t)throw ReferenceError('must set a "piece" size');for(var n=e.size,r=0,o=r+t,u=[];r<n;){var i=e.slice(r,o);u.push(i),o=(o=(r=o)+t)<n?o:n}return u}function M(e){return function(t){var n;try{(n=t(e))instanceof Promise&&(n=n.catch(e))}catch(t){e(t)}return n}}x.prototype.cancel=function(e){this.resolve(e)};var _={continue:100,switchingProtocols:101,processing:102,ok:200,created:201,accepted:202,nonauthoritativeInformation:203,noContent:204,resetContent:205,partialContent:206,ambiguous:300,movedPermanently:301,found:302,seeOther:303,notModified:304,temporaryRedirect:307,permanentRedirect:308,badRequest:400,unauthorized:401,paymentRequired:402,forbidden:403,notFound:404,methodNotAllowed:405,notAcceptable:406,proxyAuthenticationRequired:407,requestTimeout:408,conflict:409,gone:410,lengthRequired:411,preconditionFailed:412,payloadTooLarge:413,uriTooLong:414,unsupportedMediaType:415,requestedRangeNotSatisfiable:416,expectationFailed:417,iAmATeapot:418,unprocessableEntity:422,tooManyRequests:429,internalServerError:500,notImplemented:501,badGateway:502,serviceUnavailable:503,gatewayTimeout:504,httpVersionNotSupported:505};n.d(t,"Asker",(function(){return R})),n.d(t,"Canceler",(function(){return x})),n.d(t,"splitBlob",(function(){return U})),n.d(t,"safeCall",(function(){return M})),n.d(t,"HttpStatus",(function(){return _})),n.d(t,"object2Query",(function(){return d})),n.d(t,"query2Object",(function(){return p}));var k=["get","delete","head","options"],Q=["post","put","patch"],L=null;k.forEach((function(e){R.prototype[e]=function(e){return function(t,n,r){var o=h(this.conf,r),u=y({},this.conf,r);return(u=Object.assign(u,o)).method=e,u.url=t,u.params=n,q(u)}}(e)})),Q.forEach((function(e){R.prototype[e]=C(e)})),k.concat(Q).concat(["jsonp","batch"]).forEach((function(e){R[e]=function(){var t;return(t=L=L||new R)[e].apply(t,arguments)}})),R.prototype.jsonp=function(e,t,n){return n=n||{},f(t)&&(n.jsonp=t,t=void 0),n.method="get",n.adapter=A,this.get(e,t,n)},R.prototype.batch=function(e,t,n){t=Array.isArray(t)?t:[t];var r=this,o=n.method||"get",u=n.slice||t.length,i=n.retry||0,a=[],s=t.slice(0,u),c=t.slice(u),f=new Map;return new Promise((function(t,u){Promise.all(s.map((function(t,u){return function e(t,n,u,s,c){return r[o](t,n,u).then((function(e){a[c]=e})).catch((function(e){f.get(n)||f.set(n,0);var t=f.get(n);return t<i?(f.set(n,t+1),s.push(n),Promise.resolve()):Promise.reject({error:e,batch:n,all:Array.from(f.keys())})})).then((function(){if(s.length>0)return e(t,s.shift(),u,s)}))}(e,t,n,c,u)}))).then((function(){t(a)})).catch((function(e){u(e)}))}))};t.default=R}])}));