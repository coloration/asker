!function(t,e){for(var n in e)t[n]=e[n]}(window,function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return"function"==typeof t}function u(t){return"[object Object]"===function(t){return Object.prototype.toString.call(t)}(t)}function i(t){return function(t){return"number"==typeof t&&!isNaN(t)}(t)&&t>0}function a(t){return void 0===t}function s(t){return Array.isArray(t)}function c(t){return u(t)||s(t)}function f(t){return"string"==typeof t}function l(t,e){if(null!=e)if("object"!=r(e))t(e,0,e);else if(s(e))e.forEach((function(n,r){t.call(null,n,r,e)}));else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function p(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!u(t))return"";var n=[];return l((function(t,r){t=e?encodeURIComponent(t):t,n.push("".concat(r,"=").concat(t))}),t),n.join("&")}function d(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return f(t)?("?"===t[0]&&(t=t.substr(1)),t.split("&").reduce((function(t,n){var r=n.split("=");if(2===r.length){var o=r[1];if(e)try{o=JSON.parse(o)}catch(t){}t[r[0]]=o}return t}),{})):t}function h(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter((function(t){return c(t)})),o=r.shift();return r.reduce((function(t,e){if(!c(e))throw TypeError("merge a ".concat(e," to object"));return l((function(e,n){var r=t[n];u(e)?t[n]=h(u(r)?r:{},e):s(e)?t[n]=h(s(r)?r:[],e):t[n]=e}),e),t}),o),o}function y(){var t=[],e=[];return Array.from(arguments).filter((function(t){return t})).forEach((function(n){var r=n.before,u=n.after;(o(r)||s(r))&&(t=t.concat(r)),(o(u)||s(u))&&(e=e.concat(u))})),{beforeQueue:t,afterQueue:e}}n.r(e);var m=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];function b(t,e){return{status:t,message:e}}var v="Content-Type",w={data:null,status:200,statusText:"you skip request and success always",headers:{},conf:{},request:null},g="ASKER:REQUEST_ABORT",j="ASKER:REQUEST_ERROR",T="ASKER:REQUEST_TIMEOUT",O={};function E(t){if(!(this instanceof E))return new E(t);var e=h({},E.conf,t);this.conf=Object.assign(e,y(E.conf,t))}E.errorType={ABORT:g,ERROR:j,TIMEOUT:T},E.conf=h({},{url:"",baseUrl:"",query:"",body:null,headers:{},postType:"json",responseType:"object",timeout:0}),E.cache=O;var P=E;function S(){if(!(this instanceof S))return new S;this.promise=new Promise(function(t){this.resolve=t}.bind(this))}function x(t){return new Promise((function(e,n){var r=t.adapter,u=h({},w,{conf:t}),i=o(r)?r(t,u):h(u,{data:r,request:null});(i instanceof Promise?i:Promise.resolve(i)).then((function(r){(o(t.validator)?t.validator(r.status):r.status>=200&&r.status<300)?e(r):n({message:"adapter return status: ".concat(r.status),status:r.status})}))}))}function R(t){return new Promise((function(e,n){var r=new XMLHttpRequest;function u(){r=null}r.onreadystatechange=function(){if(r&&4===r.readyState&&0!==r.status){if(!(o(t.validator)?t.validator(r.status):r.status>=200&&r.status<300))return n(b(r.status,r.responseText));var i=function(t){if(!o(t.getAllResponseHeaders))return null;var e,n,r,u=t.getAllResponseHeaders(),i={};return u.split("\n").forEach((function(t){if(r=t.indexOf(":"),e=t.substr(0,r).trim().toLowerCase(),n=t.substr(r+1).trim(),e){if(i[e]&&m.includes(e))return;i[e]="set-cookie"===e?(i[e]?i[e]:[]).concat([n]):i[e]?i[e]+", "+n:n}})),i}(r),a=h({},w,{data:"text"===t.responseType?r.responseText:JSON.parse(r.responseText),status:r.status,statusText:r.statusText,headers:i,conf:t,request:r});u(),e(a)}},r.onabort=function(){r&&(o(t.onAbort)?t.onAbort.call(null,g,r):n(b(r.status,g)),u())},r.onerror=function(){r&&(o(t.onError)?t.onError.call(null,j,r):n(b(r.status,j)),u())},r.ontimeout=function(){r&&(o(t.onTimeout)?t.onTimeout.call(null,T,r):n(b(r.status,T)),u())},i(t.timeout)&&(r.timeout=t.timeout),t.withCredentials&&(r.withCredentials=!0);var s=t.headers;l((function(e,n){t.body||"content-type"!==n.toLowerCase()?r.setRequestHeader(n,e):delete s[n]}),s),a(t.withCredentials)||(r.withCredentials=!!t.withCredentials),o(t.onDownloadProgress)&&r.addEventListener("progress",(function(e){t.onDownloadProgress.call(null,e,r,t)})),o(t.onUploadProgress)&&r.upload&&r.upload.addEventListener("progress",(function(e){t.onUploadProgress.call(null,e,r,t)})),t.canceler&&t.canceler.promise.then((function(){r&&(r.abort(),u())})),r&&(r.open(t.method.toUpperCase(),t.uri,!0),r.send(t.body))}))}function A(t,e){return new Promise((function(n){var r="asker_jsonp"+(new Date).getTime(),o="".concat(t.jsonp,"=").concat(r),u=t.uri,i=u.split("?").length>1;u+=(i?"&":"?")+o;var a=document.createElement("script");function s(){window[r]&&(delete window[r],document.body.removeChild(a))}a.src=u,window[r]=function(r){var o=Object.assign({},e,{data:r,status:200,statusText:"jsonp",conf:t,request:u});n(o),s()},t.canceler&&t.canceler.promise.then(s),window[r]&&document.body.appendChild(a)}))}function C(t){var e=(t.baseUrl||"")+(t.url||"");u(t.params)&&(t.query=p(t.params),e+="?"+t.query),t.uri=e;var n,r,o,i=t.getCache&&(n=t.method,["get","option","head"].includes(n));if(i&&(r=O,o=e,Object.prototype.hasOwnProperty.call(r,o)))return Promise.resolve(O[e]);var s=t.beforeQueue.reduce((function(t,e){return e(t)}),t);return(a(s.adapter)?R:x)(s).then((function(t){var n=s.afterQueue.reduce((function(t,e){return e(t)}),t);return i&&(O[e]=n),n}))}function q(t){return function(e,n,r){var o,i=y(this.conf,r),a=h({},this.conf,r);if((a=Object.assign(a,i)).method=t,a.url=e,n){var c=a.headers||{},f=null;switch(a.postType){case"form-data":f=function(t){if(!u(t)&&!s(t))return t;var e=new FormData;return l((function(t,n){return e.append(n,t)}),t),e}(n),delete c[v];break;case"text":f=n,c[v]="text/plain";break;case"form-urlencoded":f=p(n,!0),c[v]="application/x-www-form-urlencoded";break;case"json":default:o=n,f=JSON.stringify(o),c[v]="application/json"}a.body=f}return C(a)}}function U(t,e){if(!window.Blob)return t?[t]:[];if(!(t instanceof Blob))throw TypeError("first must be a Blob");if("number"!=typeof e)throw ReferenceError('must set a "piece" size');for(var n=t.size,r=0,o=r+e,u=[];r<n;){var i=t.slice(r,o);u.push(i),o=(o=(r=o)+e)<n?o:n}return u}function _(t){return function(e){var n;try{(n=e(t))instanceof Promise&&(n=n.catch(t))}catch(e){t(e)}return n}}S.prototype.cancel=function(t){this.resolve(t)},n.d(e,"Asker",(function(){return P})),n.d(e,"Canceler",(function(){return S})),n.d(e,"splitBlob",(function(){return U})),n.d(e,"safeCall",(function(){return _})),n.d(e,"object2Query",(function(){return p})),n.d(e,"query2Object",(function(){return d}));var k=["get","delete","head","options"],M=["post","put","patch"],Q=null;k.forEach((function(t){P.prototype[t]=function(t){return function(e,n,r){var o=y(this.conf,r),u=h({},this.conf,r);return(u=Object.assign(u,o)).method=t,u.url=e,u.params=n,C(u)}}(t)})),M.forEach((function(t){P.prototype[t]=q(t)})),k.concat(M).concat(["jsonp","batch"]).forEach((function(t){P[t]=function(){var e;return(e=Q=Q||new P)[t].apply(e,arguments)}})),P.prototype.jsonp=function(t,e,n){return n=n||{},f(e)&&(n.jsonp=e,e=void 0),n.method="get",n.adapter=A,this.get(t,e,n)},P.prototype.batch=function(t,e,n){e=Array.isArray(e)?e:[e];var r=this,o=n.method||"get",u=n.slice||e.length,i=n.retry||0,a=[],s=e.slice(0,u),c=e.slice(u),f=new Map;return new Promise((function(e,u){Promise.all(s.map((function(e,u){return function t(e,n,u,s,c){return r[o](e,n,u).then((function(t){a[c]=t})).catch((function(t){f.get(n)||f.set(n,0);var e=f.get(n);return e<i?(f.set(n,e+1),s.push(n),Promise.resolve()):Promise.reject({error:t,batch:n,all:Array.from(f.keys())})})).then((function(){if(s.length>0)return t(e,s.shift(),u,s)}))}(t,e,n,c,u)}))).then((function(){e(a)})).catch((function(t){u(t)}))}))};e.default=P}]));